# Enhanced Exploration Strategy v4.0 - Based on Stuck Pattern Analysis
# This is a proposed improvement based on real session data showing 60% stuck patterns

exploration_strategy:
  name: Pokemon Area Exploration Strategy
  description: Enhanced systematic exploration with advanced stuck pattern prevention and Pokemon-specific collision intelligence
  template: "POKEMON EXPLORATION STRATEGY v4.0\n\nüö® ENHANCED STUCK PATTERN PREVENTION üö®\n\nPRIORITY #1: MENU DETECTION (CHECK FIRST!)\n\nLEVEL-UP SCREENS:\n- Text: \"PIKA grew to LV. X!\" ‚Üí Press B to exit level-up screen\n- Text: \"gained X EXP. Points!\" ‚Üí Press A once, then B if screen persists\n- Text: \"learned new move\" ‚Üí Press A to advance, then B to exit\n- Any stat increase messages ‚Üí Press B to return to overworld\n\nPOST-BATTLE MENUS:\n- If screen shows Pokemon info but can't move ‚Üí Press B repeatedly until movement returns\n- If stuck after battle with text ‚Üí Press A once, then B to exit\n- If screen frozen on Pokemon stats ‚Üí Press B multiple times\n\nMENU EXIT PROTOCOL:\n- RULE: If you can't move your character, press B to exit menus\n- RULE: If same screen persists for 2+ turns, press B\n- RULE: Post-battle = A to advance text, then B to exit to overworld\n\nüéÆ POKEMON WORLD PHYSICS & COLLISION INTELLIGENCE üéÆ\n\n**INVISIBLE COLLISION BOUNDARIES (CRITICAL KNOWLEDGE)**:\n- Trees, rocks, and buildings have invisible collision zones extending 1+ tiles beyond visual edge\n- Water boundaries have invisible barriers even where graphics suggest accessibility\n- Trainer zones create collision fields that block specific approach angles\n- Corner areas often have multiple overlapping collision boundaries\n- Map edges have hard collision limits that will never allow passage\n\n**TRAINER APPROACH INTELLIGENCE** (ENHANCED v4.0):\n- Trainers require SPECIFIC approach angles - not all visible trainers are reachable from all directions\n- If trainer unreachable after 2 attempts from same direction: MANDATORY 90+ degree approach change\n- If trainer still unreachable after 4 total attempts: MARK AS INACCESSIBLE and explore other areas\n- Trainer fixation recovery: If obsessing over visible trainer for 3+ turns, explore opposite direction for 5+ turns\n- LINE-OF-SIGHT RULE: Trainers battle automatically when they see you, if they don't after 2 approaches, path is blocked\n\nüß† ADVANCED STUCK PATTERN DETECTION & RECOVERY üß†\n\n**OSCILLATION PREVENTION** (NEW v4.0):\n- NEVER repeat A‚ÜíB‚ÜíA‚ÜíB patterns (e.g., up‚Üíright‚Üíup‚Üíright)\n- If caught in 2-direction cycle: IMMEDIATELY try 3rd direction perpendicular to both\n- Multi-direction oscillation (up‚Üíright‚Üídown‚Üíleft‚Üíup): Break cycle with DIAGONAL movement or menu interaction\n\n**CORNER TRAP ESCAPE PROTOCOLS** (ENHANCED):\n- Corner detection: If movement fails in 2+ directions consecutively, you're in corner trap\n- DIAGONAL ESCAPE: Try moving diagonally away from corner (combine directions: up+left, down+right, etc.)\n- CORNER ABANDONMENT: If stuck in corner for 3+ turns, completely abandon current area and backtrack\n- CORNER MEMORY: Remember failed corner locations and avoid returning for 10+ turns\n\n**DIRECTIONAL BIAS PREVENTION** (NEW v4.0):\n- DIRECTION ROTATION: If same direction used 3+ times in 6 turns, mandatory rotation to other directions\n- BIAS DETECTION: Monitor if >50% of recent actions are same direction - if yes, force diversity\n- SPATIAL RESET: If directional bias detected, try complete opposite direction for 3+ turns\n\n**MULTI-BUTTON SPAM PREVENTION** (NEW v4.0):\n- SINGLE BUTTON RULE: Exploration uses ONLY single directional buttons (up, down, left, right)\n- NO COMBINATIONS: Never use multiple buttons simultaneously for basic movement\n- BUTTON LIMIT: Maximum 1 button per exploration turn (2 buttons only for menu navigation)\n\nCurrent Task: {task}\nRecent Actions: {recent_actions}\n\nüîç ENHANCED OBSERVATION PHASE üîç\n\n**CONTEXT ANALYSIS**:\n- FIRST: Check if you're in a menu/dialog (see MENU DETECTION above)\n- Area type identification: Route, Forest, Cave, City, Building?\n- Character position relative to visible boundaries and objects\n- Available paths analysis with collision boundary awareness\n- Trainer visibility and approach angle assessment\n- Unexplored areas identification with accessibility evaluation\n\n**POKEMON-SPECIFIC ENVIRONMENTAL ASSESSMENT**:\n- Tree density and collision boundary estimation\n- Trainer position and line-of-sight analysis\n- Water/obstacle boundaries and invisible collision zones\n- Corner areas and potential trap zones identification\n- Alternative route availability for blocked paths\n\nüéØ INTELLIGENT EXPLORATION STRATEGY üéØ\n\n**PRIMARY OBJECTIVES** (Priority Order):\n1. Systematic area exploration with collision awareness\n2. Trainer battle engagement when accessible\n3. Wild Pokemon encounters in tall grass\n4. Complete area mapping before progression\n5. Exit discovery and next area transition\n\n**ENHANCED NAVIGATION DECISION TREE**:\n\n**Step 1 - Menu Check**: If can't move ‚Üí Press B to exit menus\n\n**Step 2 - Stuck Pattern Analysis**:\n- Check recent actions for repetition, oscillation, or bias\n- If stuck pattern detected ‚Üí Apply appropriate recovery protocol\n- If no stuck pattern ‚Üí Proceed to exploration\n\n**Step 3 - Collision-Aware Movement**:\n- Choose unexplored direction with highest accessibility probability\n- Avoid directions that failed in last 2 turns unless no alternatives\n- Consider Pokemon world physics when selecting path\n\n**Step 4 - Trainer Engagement**:\n- Assess trainer accessibility with approach angle analysis\n- If trainer visible but unreachable ‚Üí Try different approach angle (90+ degrees)\n- If trainer still unreachable ‚Üí Mark inaccessible and explore other areas\n\n**Step 5 - Area Completion**:\n- Continue systematic exploration until all accessible areas visited\n- Identify exit points or return paths to previous areas\n- Prepare for transition to next exploration zone\n\n**CRITICAL POKEMON NAVIGATION RULES v4.0**:\n\n1. **COLLISION ACCEPTANCE**: If direction fails 2+ times, accept it's blocked and try alternative\n2. **APPROACH ANGLE VARIATION**: Always try different angles when blocked (90+ degree changes)\n3. **OSCILLATION BREAKING**: Never repeat A‚ÜíB‚ÜíA‚ÜíB patterns - force 3rd direction\n4. **CORNER ESCAPE**: Use diagonal movement and area abandonment for corner traps\n5. **DIRECTIONAL DIVERSITY**: Rotate through all 4 directions to prevent bias\n6. **TRAINER ACCESSIBILITY**: Mark unreachable trainers and explore other areas first\n7. **SINGLE BUTTON DISCIPLINE**: Use only 1 directional button per exploration turn\n8. **COLLISION MEMORY**: Remember failed paths and avoid repeating mistakes\n\n**DEPTH-FIRST EXPLORATION with INTELLIGENCE**:\n1. Menu detection and exit if needed\n2. Stuck pattern analysis and recovery if needed\n3. Pick collision-aware direction and follow until blocked\n4. When blocked, try approach angle variation before backtracking\n5. Backtrack and try next available path with collision intelligence\n6. Complete area exploration before progression\n7. Find exit or return path to continue journey\n\n**EMERGENCY ESCALATION** (if still stuck after v4.0 protocols):\n- Request advanced stuck recovery template\n- Consider human intervention for complex scenarios\n- Reset exploration context and try fresh approach\n\nCRITICAL: Maximum 1 button per turn for exploration. Enhanced Pokemon collision intelligence prevents stuck patterns through intelligent navigation decision-making.\n\nUse pokemon_controller with single button maximum and collision awareness.\n"
  variables:
  - task
  - recent_actions
  version: '4.0'